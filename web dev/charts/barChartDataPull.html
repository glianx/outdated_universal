<html>
    <head>
        <title>Bar Chart (Data Pull)</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
        <style>
            #chart1
            {
                width: 80%;
            }
        </style>
    </head>
    <body>
        <h1> Februrary Highs and Lows</h1>
        <canvas id="chart1"></canvas>

        <script type="text/javascript">

            fetch('https://raw.githubusercontent.com/LSYearwood/dataDemo/main/graphData.json')
            .then((response) => response.json())
            .then (function(data)
            {
                console.log(data);
                printData(data);
            })
            .catch(err => console.log('Request Failed', err));

            function printData(tempInfo)
            {
                console.log(tempInfo);
                console.log(tempInfo['9']);
                for (day of Object.keys(tempInfo))
                    console.log(day);
                for (temps of Object.values(tempInfo))
                    console.log(temps);
                showChart(tempInfo);
            }

            function showChart(tempInfo)
            {
                xValues = [];
                highTemps = [];
                lowTemps = [];
                for (day of Object.keys(tempInfo))
                {
                    xValues.push(day);
                    highTemps.push(tempInfo[day][0]);
                    lowTemps.push(tempInfo[day][1]);
                }

                // xValues = [9,10,11,12,13,14,15,16,17,18,19,20,21,22];
                // highTemps = [3,2,2,-1,-10,-11,-8,1,0,-3,-1,-3,-2,-2];
                // lowTemps = [0,-5,-1,-20,-17,-17,-9,-1,-7,-4,-6,-9,-6,-6];
                barColours = []
                i = 0;
                while (i < highTemps.length)
                {
                    if (highTemps[i]<1)
                        barColours.push("blue");
                    else
                        barColours.push("yellow");
                    i++;
                }
                console.log(barColours);

                new Chart("chart1", 
                {
                    type: "bar",
                    data: 
                    {
                        labels: xValues,
                        datasets: 
                        [{
                            label: "High Temperature",
                            backgroundColor: barColours,
                            data: highTemps
                        },
                        {
                            label: "Low Temperature",
                            fill: false,
                            backgroundColor: "red",
                            data: lowTemps
                        }]
                    },
                    options: 
                    {
                        legend: 
                        {
                            display: true,
                            position: "bottom"
                        },
                        scales: 
                        {
                            yAxes: 
                            [{
                                scaleLabel: {display: true,labelString: 'Celcius'}
                            }],
                            xAxes: 
                            [{
                                scaleLabel: {display: true,labelString: 'Day'}
                            }]
                        },
                        title: 
                        {
                            display: true,
                            text: "Temperatures - Feb 9 to 22"
                        }
                    }
                });  
            }          
        </script>
    </body>
</html>