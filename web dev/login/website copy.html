<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ACM</title>


    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

            
</head>
 <body onload = "startTimer()">

	<nav>
		<div class="nav-wrapper">
			<a href="https://google.com" target="_blank" class="brand-logo">Ancient Chinese Mathematics</a>
				<ul id="nav-mobile" class="left hide-on-med-and-down">
					<li><a href="#login_modal" id = "login_nav" class = "modal-trigger">Log in</a></li>
					<li><a href="#new_user_modal" id = "new_user_nav" class = "modal-trigger">New Account</a></li>
					<li><a href="#" id = "logout_nav" style = "display:none">Log out</a></li>
					<li><a href="#" id = "game_nav" style = "display:none">Game</a></li>
					<li><a href="#" id = "history_nav" style = "display:none">History</a></li>
					<li><a href="#" id = "videos_nav" style = "display:none">Videos</a></li>
				</ul>
		</div>
	</nav>


	<!-- Modal Structure -->
	<div id="login_modal" class="modal">
	
		<div class = "modal-content">
		
			<form id="login_form" autocomplete = "on">
				<div class="input-field">
					<input type="email" id="user_name" autocomplete="" required />
					<label for="user_name">User Name</label>
				</div>
				<div class="input-field">
					<input type="password" id="user_password" autocomplete="" required />
					<label for="user_password">Password</label>
				</div>
				
				<button class="btn yellow darken-2 z-depth-0">Login</button>
			</form>

		</div>
	</div>

	<div id="new_user_modal" class="modal">

		<div class = "custom_padding">
		
			<h1>Create New Account</h1>

			<form id="new_user_form" autocomplete = "on">
				
				<div class="input-field">
					<input type="text" id="user_name2" autocomplete="" required />
					<label for="user_name2">User Name</label>
				</div>

				<div class="input-field">
					<input type="number" id="user_password2" autocomplete="" required />
					<label for="user_password2">Password</label>
				</div>

				<div class="input-field">
					<input type="time" id="user_password_c" autocomplete="" required />
					<label for="user_password_c">Password</label>
				</div>

				<button class="btn pink light-3 z-depth-5 waves-effect waves-light">Create New Account</button>
			</form>


		</div>
	</div>


	<div id = "landing" class = "container">
		<h1>Welcome</h1>
		<div id = "landing_images" class = "center">
			<img id = "element_img" class="responsive-img" src="images/1_Hydrogen.jpg">
        </div>

	</div>
	<div id = "game" style = "display: block">
		<h1>Game</h1>

	</div>
	<div id = "history" class = "container" style = "display: block">
		<h1>History</h1>

	</div>

	<div id = "videos" class = "container" style = "display: block">
		<h1>Videos</h1>

	</div>

	<style>
		.custom_padding {
			padding: 20px;
		}
		#game_font {
			padding: 20px;
			color: blue;
			font-family:verdana;
			text-align:right;
		}
		h1 {
			text-align: center;
			color: rgb(0, 255, 200);
		}
	</style>

  	<!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>


    	users = ["user1@user.com","user2@user.com","user3@user.com"]
    	passwords = ["u1","u2","u3"]

    	//stores current user and the index in the list
    	//we have to modify the login process now to store the current user and index. 
    	cuser = ""
    	cuserindex = -1


		
		const login_form = document.querySelector("#login_form")
		const new_user_form = document.querySelector("#new_user_form")

		const login_nav = document.getElementById("login_nav")
		const logout_nav = document.getElementById("logout_nav")
		const game_nav = document.getElementById("game_nav")
		const history_nav = document.getElementById("history_nav")
		const video_nav = document.getElementById("videos_nav")


		const landing_content = document.getElementById("landing")
		const element_img = document.getElementById("element_img")

		const game_content = document.getElementById("game")
		const history_content = document.getElementById("history")
		const videos_content = document.getElementById("videos")

		// const headers = document.querySelectorAll("h1");
		// console.log(headers)
		
		document.addEventListener('DOMContentLoaded', function() {
			//console.log("LOADED")

			options = {
				dismissible: true,
				endingTop: "10%",
				inDuration: 50,
				onCloseEnd: null,
				onCloseStart: null,
				onOpenEnd: null,
				onOpenStart: null,
				opacity: 0.4,
				outDuration: 50,
				preventScrolling: false,
				startingTop: "0%",
			};


			var elems = document.querySelectorAll('.modal');
			// console.log(elems);
			var instances = M.Modal.init(elems, options);
			// console.log(instances);
		});
		

		new_user_form.addEventListener("submit", (e) => {

		
			e.preventDefault()

			email = new_user_form["user_name2"]

			pw = new_user_form["user_password2"]

			pwc = new_user_form["user_password_c"]

			console.log(email).value

			console.log(pw).value
			
			console.log(pwc).value
			

			//LOGIC NEEDED
			//Step 1 (IF): Confirm passwords match

				//Step 2 (LOOP):
				// Loop through users to ensure that email is not already in list

			//STEP 3 (IF): 
			//	Add user to list if the user is valid or prompt user with appropriate 
			//	error message





			var singleModalElem = document.querySelector('#new_user_modal');

			var instance = M.Modal.getInstance(singleModalElem); 
			instance.close(); 
		});

		login_form.addEventListener("submit", (e) => {


			e.preventDefault();

			//STEP 1: We want to access the fields in the modal
			email = login_form["user_name"].value //stores the inputted email
			password = login_form["user_password"].value //stores the inputted password

			// console.log(login_form["user_name"])
			// console.log(login_form["user_name"].value)

			// clear the fields.
			// login_form["user_name"].value = ""
			// login_form["user_password"].value = ""
			login_form.reset()

			
			valid = false; //assume invalid credentials	


			//STEP 2: We want to check if it is a valid user name and password

			/*
			This loop looks different than python, but it is the same 
			idea, but much nicer to use.  This is because it does not 
			assume the count check and chnage  
			
			for (count; check; change)
			*/

			for (i = 0; i < users.length; i = i + 1) {

				if (users[i] === email && passwords[i] === password) {
					valid = true;
					cuser = email;
					cuserindex = i;
					break;
				}
				

				

			}


			//Step 3: 
			//	If valid - update page 
			//	If not valid - notify user.
			if (valid === true) {
				alert("you're in!");

				nav_objects = [video_nav,game_nav,history_nav,logout_nav];
				for (let i = 0; i < nav_objects.length; i++) {
					nav_objects[i].style.display = "block"
				}

				new_user_nav.style.display = "none"
				login_nav.style.display = "none"

				var singleModalElem = document.querySelector('#login_modal');
				var instance = M.Modal.getInstance(singleModalElem); 
				instance.close(); 

			}
			else {
				alert("wrong!!!")
			}
		

		});

		game_nav.addEventListener("click",(e) => {
			//console.log(e);
		
			//Step 1: Hide all sections that contain content
			landing_content.style.display = "none"
			videos_content.style.display = "none"
			history_content.style.display = "none"

			game_content.style.display = "block"
		});

		//To have the system logout we need to bind a click event to the logout button and then 
		//reset the state of the nav bar. What we have not done in this project is store the
		//user information.  This could be userful later if you need to remember what the user is doing

		logout_nav.addEventListener("click",(e) => {

				nav_objects = [video_nav,game_nav,history_nav,logout_nav];
					for (let i = 0; i < nav_objects.length; i++) {
						nav_objects[i].style.display = "none"
					}


				login_nav.style.display = "block"
				new_user_nav.style.display = "block"


				cuser = ""
				cuserindex = -1			
		});

		//cycling through images
		images = ["1_Hydrogen","2_Helium","3_Lithium","4_Berillium","5_Boron","6_Carbon","7_Nitrogen","8_Oxygen","9_Fluorine","10_Neon","11_Sodium","12_Magnesium","13_Aluminum","14_Silicon","15_Phosphorus","16_Sulfur","17_Chlorine","18_Argon","19_Potassium","20_Calcium","21_Scandium","22_Titanium","23_Vanadium","24_Chromium","25_Manganese","26_Iron","27_Cobalt","28_Nickel","29_Copper","30_Zinc","31_Gallium","32_Germanium","33_Arsenic","34_Selenium","35_Bromine","36_Krypton","37_Rubidium","38_Strontium","39_Yttrium","40_Zirconium"];

		function displayNextImage() {
			randval = Math.floor(Math.random() * images.length);
			element_img.src = "images/"+images[randval]+".jpg"

		}
		function startTimer() {
              setInterval(displayNextImage, 1000);
        }
		


    </script>


  
</body>
</html>